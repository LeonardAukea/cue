# Verify version output
cue version
stdout -count=1 'cue version \(devel\)'

# verify version output with env
env CUE_VERSION_TEST_CFG='[{"Key":"vcs","Value":"git"},{"Key":"vcs.revision","Value":"47b7032385cb490fab7d47b89fca36835cf13d39"},{"Key":"vcs.time","Value":"2022-05-10T04:58:46Z"},{"Key":"vcs.modified","Value":"true"}]'
cue version
[!go1.18] stdout -count=1 'cue version \(devel\) [a-z]+/[a-z]+'
[go1.18] stdout -count=1 'cue version v0.0.0-20220510045846-47b7032385cb$'
[go1.18] stdout -count=1 'vcs git'
[go1.18] stdout -count=1 'vcs\.revision 47b7032385cb490fab7d47b89fca36835cf13d39'
[go1.18] stdout -count=1 'vcs\.time 2022-05-10T04:58:46Z'
[go1.18] stdout -count=1 'vcs\.modified true'

# verify help works
cue version -h
stdout -count=1 'print CUE version'
stdout -count=1 'Usage:'

# verify rando flags throw errors
! cue version -flag
stderr 'Error: unknown shorthand'
